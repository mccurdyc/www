<!--
Put this file in /layouts/shortcodes/figure.html
NB this overrides Hugo's built-in "figure" shortcode but is backwards compatible
Documentation and licence at https://github.com/liwenyip/hugo-easy-gallery/
-->
<!-- count how many times we've called this shortcode; load the css if it's the first time -->
{{- if not ($.Page.Scratch.Get "figurecount") }}<link rel="stylesheet" href="/css/hugo-easy-gallery.css" />{{ end }}
{{- $.Page.Scratch.Add "figurecount" 1 -}}
{{ $image := .Get "src" }}
<!-- use either src or link-thumb for thumbnail image -->
<a href="https://storage.googleapis.com/images.mccurdyc.dev{{ $image }}" target="_blank">
  <div class="box fancy-figure caption-position-bottom caption-effect-fade">
    <figure itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
      <div class="img">
        <img itemprop="contentUrl" src="{{ $image }}?quality=100&pad=200&bg-color=ffffff" />
      </div>

      <figcaption>
        {{ .Get "caption" | default $image }}
      </figcaption>
    </figure>
  </div>
</a>
